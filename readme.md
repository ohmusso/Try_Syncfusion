# Try "The Help Desk Application" by Syncfusion

<https://www.syncfusion.com/ebooks/blazor-succinctly>

## Project

### Create solution and project

``` dotnet
dotnet new blazorwasm -o HelpDeskApp --hosted --auth Individual
#--use-local-db
```

* HelpDeskApp.sln
  * Client
    * HelpDeskApp.Client.csproj
  * Server
    * HelpDeskApp.Server.csproj
  * Shared
    * HelpDeskApp.Shared.csproj

## Run

``` dotnet
dotnet run --project "server"
```

or

``` dotnet
dotnet watch run --project "server"
# changes are reflected and restart
```

### Run Azure Storage Emurator

Command Palette : 'Ctrl' + 'Shift' + 'P'
Azurite:Start Blob Service

### test accounts

See Server/appsettings.json
"TestUsers"

## Debug

Run(Ctrl + Shift + D) on vscode

## SqlServer

Microsoft SQL Server Express (64-bit)

14.0.1000.169

Windows 10 Home (10.0)

### Connection strings

``` json
  "ConnectionStrings": {
    "SqlExpressConnection": "Server=localhost\\SQLEXPRESS;Database=SyncfusionHelpDesk;Trusted_Connection=True;MultipleActiveResultSets=true"
  }
```

### Add service

``` csharp
//Server/Startup.cs
services.AddDbContext<ApplicationDbContext>(options =>
    options.UseSqlServer(
        Configuration.GetConnectionString("SqlExpressConnection")));
```

``` csharp
//Server/Startup.cs
services.AddDbContext<SyncfusionHelpDeskContext>(options =>
    options.UseSqlServer(
        Configuration.GetConnectionString("SqlExpressConnection")));
```

To specify multiple dbcontext, repeat AddDbContext`<Dbcontext>`

### Add initial migration

``` dotnet
dotnet ef migrations add InitialCreate --project "Server"
```

### Create SyncfusionHelpDesk Table

execute "Server/query/HelpDesk.sql" on SqlServer

## Entity framwork

### Reverse Engineering

``` dotnet
dotnet ef dbcontext scaffold Name=SqlExpressConnection Microsoft.EntityFrameworkCore.SqlServer --project "Server" -t "[dbo].[HelpDeskTickets]" -t "[dbo].[HelpDeskTicketDetails]" --context-dir "Data" --output-dir "Data"
```

"Name=SqlExpressConnection" is read from "ConnectionStrings" on appsettings.json

## Tools

### Azure

#### Core

``` dotnet
dotnet add Server package Azure.Core --version 1.8.1
```

#### Blob

``` dotnet
dotnet add Server package Azure.Storage.Blobs -v 12.8.0
```

### syncfusion blazor platform

``` dotnet
dotnet add Client package Syncfusion.Blazor.Inputs -v 18.4.0.30
dotnet add Client package Syncfusion.Blazor.Popups -v 18.4.0.30
dotnet add Client package Syncfusion.Blazor.Data -v 18.4.0.30
dotnet add Client package Syncfusion.Blazor.DropDowns -v 18.4.0.30
dotnet add Client package Syncfusion.Blazor.Layouts -v 18.4.0.30
dotnet add Client package Syncfusion.Blazor.Calendars -v 18.4.0.30
dotnet add Client package Syncfusion.Blazor.Navigations -v 18.4.0.30
dotnet add Client package Syncfusion.Blazor.Lists -v 18.4.0.30
dotnet add Client package Syncfusion.Blazor.Grid -v 18.4.0.30
dotnet add Client package Syncfusion.Blazor.Buttons -v 18.4.0.30
dotnet add Client package Syncfusion.Blazor.Notifications -v 18.4.0.30
```

#### Add license key

see below url
<https://help.syncfusion.com/common/essential-studio/licensing/license-key?_ga=2.240940611.1192356537.1609715894-565617065.1609279460#how-to-generate-syncfusion-license-key>

Register lisence key

``` csharp
//Client/Program.cs
public static async Task Main(string[] args)
{
  ....

  //Register Syncfusion license 
  Syncfusion.Licensing.SyncfusionLicenseProvider.RegisterLicense("<KEY>");
```

## vscode extention

azurite.azurite
alexcvzz.vscode-sqlite
DavidAnson.vscode-markdownlint
donjayamanne.githistory
eamodio.gitlens
GitHub.vscode-pull-request-github
jchannon.csharpextensions
ms-azuretools.vscode-azureappservice
ms-dotnettools.csharp
ms-mssql.mssql
ms-vscode.azure-account
ms-vscode.azurecli
ms-vscode.js-debug-nightly
ms-vscode.powershell
shd101wyy.markdown-preview-enhanced...

### Markdown Preview Enhanced

markdowns in this project is generated by this

see <https://shd101wyy.github.io/markdown-preview-enhanced/#/>

### Azurite

This is emulator for local Azure Storage.

Azurite is controlled by vscode command palette.

Azurite may create "__blobstorage__" directory in the project.

#### process commands

Azurite:Clean - すべての Azurite サービス永続性データをリセットします
Azurite:Clean Blob Service - Blob Service をクリーンアップします
Azurite:Clean Queue Service - Queue service をクリーンアップします
Azurite:Close - すべての Azurite サービスを閉じます
Azurite:Close Blob Service - Blob Service を閉じます
Azurite:Close Queue Service - Queue service を閉じます
Azurite:Start - すべての Azurite サービスを開始します
Azurite:Start Blob Service - Blob Service を開始します
Azurite:Start Queue Service - Queue service を開始します

##### Setting Blob

Azurite:Blob Host - Blob service のリッスン エンドポイント。 既定の設定は 127.0.0.1 です。
Azurite:Blob Port - Blob service のリスニング ポート。 既定のポートは 10000 です。

##### Setting others

Azurite:Cert - HTTPS モードを有効にするための、ローカルに信頼されている PEM または PFX 証明書ファイルへのパス。
Azurite:Debug - Azurite チャネルにデバッグ ログを出力します。 既定値は false です。
Azurite:Key - ローカルに信頼されている PEM キーファイルへのパス。 Azurite:Cert が PEM ファイルを指す場合は必須です。
Azurite:Location - ワークスペースの場所のパス。 既定値は Visual Studio Code の作業フォルダーです。
Azurite:Loose - ルーズ モード (サポートされていないヘッダーとパラメーターを無視します) を有効にします。
Azurite:OAuth - 省略可能な OAuth レベル。
Azurite:Pwd - PFX ファイルのパスワード。 Azurite:Cert が PFX ファイルを指す場合は必須です。
Azurite:Queue Host - Queue サービスのリッスン エンドポイント。 既定の設定は 127.0.0.1 です。
Azurite:Queue Port - Queue サービスのリッスン ポート。 既定のポートは 10001 です。
Azurite:Silent - サイレント モードではアクセス ログが無効になります。 既定値は false です。
Azurite:API バージョンの確認をスキップします - 要求 API バージョン チェックをスキップします。 既定値は false です。

#### Explore Azurite

Install "Microsoft Azure Storage Explore"

@import "./doc/images/2021-01-24 231825.png"
